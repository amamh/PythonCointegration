<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<!--external stuff-->
<link rel="import" href="import_groups/all.html">
<!--my own components-->
<link rel="import" href="components/date-pick.html">



<!--<link rel="import" href="../../../iron-media-query/iron-media-query.html">
<link rel="import" href="../../../iron-icons/iron-icons.html">

<link rel="import" href="../../../paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../../../paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../paper-item/paper-item.html">
<link rel="import" href="../../../paper-material/paper-material.html">
<link rel="import" href="../../../paper-menu/paper-menu.html">
<link rel="import" href="../../../paper-toolbar/paper-toolbar.html">-->


<dom-module id="x-app">

  <link rel="import" type="css" href="x-app.css">

  <style is="custom-style">
    paper-button.green {
      background-color: var(--paper-green-500);
      color: white;
    }
    paper-button.red {
      background-color: var(--paper-red-500);
      color: white;
    }
    paper-button.blue {
      background-color: var(--paper-blue-500);
      color: white;
    }

  </style>



  <template>

    <paper-drawer-panel id="drawerPanel" responsive-width="2560px">

      <div class="nav" drawer>
        <!-- Nav Content -->
      </div>

      <paper-header-panel class="main" main mode="waterfall">

        <!-- Main Toolbar -->
        <paper-toolbar>
          <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
        </paper-toolbar>

        <!-- Main Content -->
        <div class="content">
          <paper-material>

            <paper-input id="symbols" label="list of symbols" value="GOOG/NYSE_EWA, GOOG/NYSEARCA_EWC, GOOG/NYSEARCA_IGE" required> </paper-input>

            <br/>

            <label>Date from</label>
            <date-pick id="date"></date-pick>



            <paper-dialog id="dialog" class="paper-date-picker-dialog" modal on-iron-overlay-closed="dismissDialog">

            </paper-dialog>

            <br/>
            <br/>

            <paper-button id="bSubmit" raised class="blue"> Submit </paper-button>
          </paper-material>

          <paper-material>
            <paper-spinner id="loading" center-justified></paper-spinner>
            <div id="result"></div>
          </paper-material>
        </div>

      </paper-header-panel>

    </paper-drawer-panel>

  </template>

  <script>

    Polymer({

      is: 'x-app',

      ready: function() {
        // self = this;

        this.$.bSubmit.onclick = () => {
          this.$.loading.active = true;

          $.post("/submit", {
            // Data sent to server
            "symbols": this.$.symbols.value,
            "date": this.$.date.date.toISOString(),
          }).done((data) => {
            this.$.loading.active = false;
            this.$.result.innerHTML = data;
          }).fail(() => {
            this.$.loading.active = false;
          });

        };
      },

    });

  </script>
  <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>


  <style is="custom-style">
    paper-button.green {
      background-color: var(--paper-green-500);
      color: white;
    }
  </style>

</dom-module>
